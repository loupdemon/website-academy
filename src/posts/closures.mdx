---
title: Que es un closure?
date: 2019-01-16
author: arthur
tags: ["programacion funcional"]
---

Si, te dire de inicio... como muchas cosas, los Closures tienen muchas definiciones. Son usadas en el d칤a a d칤a de un programador, aunque inicialmente no estaban en muchos lenguajes de programaci칩n, hoy en d칤a est치n pr치cticamente en todos. Java (desde su versi칩n 8), Javascript, C#, Ruby, Python, ... Smalltalk, Lisp (el 1ro en usarlo 游끥).

Asi que, que son los closures?. Son:

> Funciones que pueden acceder a variables no locales - fuera de la funci칩n (pero que sirven a la funci칩n ) - [Ralph Johnson](http://wiki.c2.com/?WhatIsClosure), precursor de patrones de software (probablemente lo conoces del famoso libro Patrones de dise침o)

Mmmmm... muy formal? Que tal un ejemplo?

Digamos que tenemos una funci칩n que me saluda a mi mismo 游땦, algo asi como:

```javascript
function sayHiToMe(me) {
  console.log("Hello, " + me + "!");
}

var me = "Bruce wayne";
sayHiToMe(me);
```

Escribiendo esta funcion `sayHiToMe` como un closure, seria algo asi

```javascript
var me = "Bruce wayne"; // una variable externa (no local a sayHiToMe)
function sayHiToMe() {
  console.log("Hello, " + me + "!");
}
sayHiToMe(); // sin argumentos
```

Nota que al llamarlo no tienen ning칰n argumento y accede a la variable `me` que no esta declarada dentro de la funci칩n (no es local). Entonces como queda la definici칩n?

> Funciones (como `sayHiToMe`) que pueden acceder a variables no locales (como la variable `me`) - fuera de la funci칩n (pero que sirven a la funci칩n - la usa para hacer un `console.log`)

Simplemente es eso. Pero ahora te dir치s oye para que sirve eso?, bueno como te dije, hoy la mayor칤a de programadores lo usamos en el d칤a a d칤a.

Mira un ejemplo:

```ruby
def highPaid(employees) # obtener empleados con salario > 150
  threshold = 150
  return employees.select {|e| e.salary > threshold}
end
```

o que tal este?

```javascript
// en vez de obtener las personas legales (>17 a침os) con esto:
console.log(people.filter(person => person.age > 17));
// podemos hacer
const greaterThan = age => person => person.age > age;
console.log(people.filter(greaterThan(17)));

// o incluso ... creando funciones reusables
const isLegalPerson = greaterThan(17);
const isOldPerson = greaterThan(65);

console.log(people.filter(isLegalPerson));
console.log(people.filter(isOldPerson));
```

Este 칰ltimo ejemplo usa la potencia de los closures junto a la t칠cnica currying. Ves que la funci칩n `greaterThan` retorna otra funci칩n? Si la llamas asi `greaterThan(17)` te retornar치 una funci칩n asi `person => person.age > 17`. Currying y closures son muy grandes amigos, incluso permiten el reuso al m치ximo (asi como vimos), pero eso ser치 para otro post.

Espero que te haya gustado el post 游뗵

## Donde aprender m치s?

- [Closures en Javascript](https://www.youtube.com/watch?v=CQqwU2Ixu-U) de Fun fun functioooooon!
- [Lambdas](https://martinfowler.com/bliki/Lambda.html) del bliki de Martin Fowler.
- [What is closures?](http://wiki.c2.com/?WhatIsClosure) del famoso wiki C2
